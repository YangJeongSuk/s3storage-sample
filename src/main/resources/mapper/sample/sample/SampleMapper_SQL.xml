<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.go.hai.s3storage.mapper.SampleMapper">

    <select id="selectSampleList" parameterType="kr.go.hai.s3storage.service.impl.vo.SampleVO" resultType="kr.go.hai.s3storage.service.impl.vo.SampleVO">
		/* SampleMapper.selectSampleList - 팝업 목록 조회 */
		<include refid="CmmnMapper.pagingHeader" />
		SELECT POPUP_SN
		     , POPUP_TTL
		     , POPUP_URL_ADDR
		     , POPUP_PSTG_BGNG_DT
		     , POPUP_PSTG_END_DT
		     , POPUP_WDTH_LEN
		     , POPUP_VRTC_LEN
		     , POPUP_USE_YN
		     , POPUP_UNMR_USE_YN
		     , POPUP_CN
          FROM TKC_POPUP_M
         ORDER BY POPUP_SN DESC
        <include refid="CmmnMapper.pagingFooter" />
	</select>

    <select id="selectSampleListCnt" parameterType="kr.go.hai.s3storage.service.impl.vo.SampleVO" resultType="java.lang.Integer">
		/* SampleMapper.selectSampleListCnt - 팝업 목록 건수 조회 */
		SELECT count(*)
          FROM TKC_POPUP_M
	</select>

	<select id="selectSampleInfo" parameterType="kr.go.hai.s3storage.service.impl.vo.SampleVO" resultType="kr.go.hai.s3storage.service.impl.vo.SampleVO">
		/* SampleMapper.selectSampleInfo - 팝업 상세 조회 */
		SELECT POPUP_SN
		     , POPUP_TTL
		     , POPUP_URL_ADDR
		     , POPUP_PSTG_BGNG_DT
		     , POPUP_PSTG_END_DT
		     , POPUP_WDTH_LEN
		     , POPUP_VRTC_LEN
		     , POPUP_USE_YN
		     , POPUP_UNMR_USE_YN
		     , POPUP_CN
          FROM TKC_POPUP_M
         WHERE POPUP_SN = #{popupSn}
	</select>
	
	<update id="insertSampleInfo" parameterType="kr.go.hai.s3storage.service.impl.vo.SampleVO">
		/* SampleMapper.insertSampleInfo - 팝업 상세 입력 */
		<selectKey keyProperty="popupSn" resultType="java.lang.String" order="BEFORE">
			SELECT NVL(MAX(POPUP_SN) + 1, 1)
			  FROM TKC_POPUP_M
		</selectKey>
		INSERT INTO TKC_POPUP_M (
		       POPUP_SN
		     , POPUP_TTL
		     , POPUP_URL_ADDR
		     , POPUP_PSTG_BGNG_DT
		     , POPUP_PSTG_END_DT
		     , POPUP_WDTH_LEN
		     , POPUP_VRTC_LEN
		     , POPUP_USE_YN
		     , POPUP_UNMR_USE_YN
		     , POPUP_CN
		 ) VALUES (
		       #{popupSn}
		     , #{popupTtl}
		     , #{popupUrlAddr}
		     , #{popupPstgBgngDt}
		     , #{popupPstgEndDt}
		     , #{popupWdthLen}
		     , #{popupVrtcLen}
		     , #{popupUseYn}
		     , #{popupUnmrUseYn}
		     , #{popupCn}
		 )
	</update>
	
	<update id="updateSampleInfo" parameterType="kr.go.hai.s3storage.service.impl.vo.SampleVO">
		/* SampleMapper.updateSampleInfo - 팝업 상세 수정 */
		UPDATE TKC_POPUP_M
		   SET POPUP_TTL          = NVL(#{popupTtl}       , POPUP_TTL         )
		     , POPUP_URL_ADDR     = NVL(#{popupUrlAddr}   , POPUP_URL_ADDR    )
		     , POPUP_PSTG_BGNG_DT = NVL(#{popupPstgBgngDt}, POPUP_PSTG_BGNG_DT)
		     , POPUP_PSTG_END_DT  = NVL(#{popupPstgEndDt} , POPUP_PSTG_END_DT )
		     , POPUP_WDTH_LEN     = NVL(#{popupWdthLen}   , POPUP_WDTH_LEN    )
		     , POPUP_VRTC_LEN     = NVL(#{popupVrtcLen}   , POPUP_VRTC_LEN    )
		     , POPUP_USE_YN       = NVL(#{popupUseYn}     , POPUP_USE_YN      )
		     , POPUP_UNMR_USE_YN  = NVL(#{popupUnmrUseYn} , POPUP_UNMR_USE_YN )
		     , POPUP_CN           = NVL(#{popupCn}        , POPUP_CN          )
		 WHERE POPUP_SN = #{popupSn}
	</update>
	
	<update id="deleteSampleInfo" parameterType="kr.go.hai.s3storage.service.impl.vo.SampleVO">
		/* SampleMapper.deleteSampleInfo - 팝업 상세 삭제 */
		UPDATE TKC_POPUP_M
		   SET POPUP_USE_YN = 'N'
		 WHERE POPUP_SN = #{popupSn}
	</update>
	
</mapper>
